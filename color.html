<!DOCTYPE html>
<html>
<head>
    <title>Color Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --gold: #FFD700; --cyan: #00E5FF; --glass-bg: rgba(15, 20, 25, 0.6); --border: rgba(255, 255, 255, 0.15); }
        body { font-family: 'Rajdhani', sans-serif; text-align: center; margin: 0; color: white; background: url('background.jpg') no-repeat center center fixed; background-size: cover; height: 100vh; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        
        /* ... [INCLUDE ALL YOUR PREVIOUS CSS HERE] ... */
        /* To save space in this response, assume the previous CSS is here */
        /* IMPORTANT: Add this CSS for the Home Button */
        .home-btn { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.6); border: 1px solid var(--gold); color: var(--gold); padding: 10px 20px; cursor: pointer; font-weight: bold; text-decoration: none; border-radius: 8px; z-index: 5000; }
        .home-btn:hover { background: var(--gold); color: black; }
        
        /* Re-paste your specific game CSS classes (bet-card, die, etc) here */
        .main-container { display: grid; grid-template-columns: 260px 1fr 260px; gap: 20px; width: 95%; height: 90vh; max-width: 1600px; }
        .game-wrapper { background: var(--glass-bg); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 16px; display: flex; flex-direction: column; overflow: hidden; }
        /* ... ensure you have the dice/cards CSS ... */
    </style>
</head>
<body>
    
    <a href="/" class="home-btn"><i class="fas fa-home"></i> LOBBY</a>

    <div id="authOverlay">
        <div class="auth-container">
            <h1 style="color:white;">COLOR GAME</h1>
            <input type="text" id="loginUser" class="auth-input" placeholder="USERNAME">
            <input type="password" id="loginPass" class="auth-input" placeholder="PASSWORD">
            <button onclick="doLogin()" class="auth-btn btn-login">PLAY</button>
            <button onclick="doRegister()" class="auth-btn btn-register">REGISTER</button>
            <div class="auth-error" id="loginError"></div>
        </div>
    </div>

    <div class="main-container" id="gameUI" style="display:none;">
        <div class="game-wrapper">
             <div id="timer" style="font-size:80px; font-weight:bold; margin-top:50px;">20</div>
             <div style="display:flex; gap:10px; justify-content:center; margin-bottom:50px;">
                 <div id="die1" class="die" style="background:#333; width:80px; height:80px;">?</div>
                 <div id="die2" class="die" style="background:#333; width:80px; height:80px;">?</div>
                 <div id="die3" class="die" style="background:#333; width:80px; height:80px;">?</div>
             </div>
             </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        
        // CRITICAL: TELL SERVER WE ARE IN COLOR GAME
        socket.emit('enter_room', 'color');

        // ... [Your existing Game Logic: Login, Bets, Timer, etc.] ...
        
        function doLogin(){
            const u=document.getElementById('loginUser').value; 
            const p=document.getElementById('loginPass').value; 
            socket.emit('auth_handshake',{ type: 'player', username:u, password:p }); 
        }
        function doRegister(){
            const u=document.getElementById('loginUser').value; 
            const p=document.getElementById('loginPass').value; 
            socket.emit('register',{ username:u, password:p }); 
        }

        socket.on('login_success', (data) => {
            document.getElementById('authOverlay').style.display='none';
            document.getElementById('gameUI').style.display='grid';
        });
        
        // Listeners for Color Game specifics
        socket.on('timer_update', (t) => document.getElementById('timer').innerText = t);
        socket.on('game_rolling', () => document.getElementById('timer').innerText = "ROLLING");
        socket.on('game_result', (res) => {
            // Update dice visuals
            document.getElementById('timer').innerText = "RESULT";
        });
    </script>
</body>
</html>